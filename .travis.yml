stages:
  - test
  - name: release
    if: tag IS present

os: linux

language: python

cache: pip

install:
  - pip install tox

script: tox

jobs:
  include:
    - stage: test
      python: 3.6
      env: TOXENV=py,codecov
    - stage: test
      python: 3.7
      env: TOXENV=py,codecov
    - stage: test
      python: 3.7
      env: TOXENV=lint
    - stage: test
      python: 3.7
      env: TOXENV=docs
    #- stage: release
    #  python: 3.7
    #  install: skip
    #  script: skip
    #  deploy:
    #    provider: pypi
    #    user: theatro
    #    distributions: sdist bdist_wheel
    #    on:
    #      tags: true
    #    password:
    #      secure:
